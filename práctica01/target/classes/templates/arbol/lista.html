<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
    <head>
        <meta charset="UTF-8">
        <title>Lista de Árboles</title>
        <link rel="stylesheet" th:href="@{/css/estilos.css}">
    </head>
    <body class="index-body">

        <div th:replace="fragmentos :: header"></div>

        <main class="main-content">
            <div class="container">

                <h1>Lista de Árboles Almacenados</h1>

               
                <div class="button-container">
                    <a th:href="@{/arbol/nuevo}" class="button">Agregar Nuevo Árbol</a>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre Común</th>
                            <th>Tipo de Flor</th>
                            <th>Dureza Madera</th>
                            <th>Altura Promedio (m)</th>
                            <th>Estado</th>
                            <th>Imagen</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="arbol : ${arboles}">  <!-- ITERA SOBRE CADA ARBOL GRACIAS AL CONTROLLER x eso el plural -->
                            <td th:text="${arbol.id}"></td>
                            <td th:text="${arbol.nombreComun}"></td>
                            <td th:text="${arbol.tipoFlor}"></td>
                            <td th:text="${arbol.durezaMadera}"></td>
                            <td th:text="${arbol.alturaPromedio}"></td>
                            <td>
                                <span th:each="estado : ${estados}" 
                                      th:if="${estado.idEstado == arbol.estadoId}" 
                                      th:text="${estado.nombreEstado}"></span>
                            </td>
                            <td>
                                <img th:src="${arbol.rutaImagen}" alt="Imagen del árbol">
                            </td>
                            <td class="actions">
                                <a th:href="@{'/arbol/editar/' + ${arbol.id}}" class="button">Editar</a>
                                <a th:href="@{'/arbol/eliminar/' + ${arbol.id}}" class="button"
                                   onclick="return confirm('¿Seguro que quieres eliminar este árbol?');">Eliminar</a>
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </main>

        <div th:replace="fragmentos :: footer"></div>

    </body>
</html>
